<div class="flex-1 p-6 lg:p-8">
  <div class="max-w-7xl mx-auto">
    <!-- Header -->
    <div class="mb-6">
      <h1 class="text-gray-900 dark:text-white text-3xl font-black tracking-tight mb-2">
        Modelo Boleta/Factura
      </h1>
      <p class="text-gray-600 dark:text-gray-400">
        Personaliza el diseño y visualización de tus comprobantes de venta
      </p>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
      <!-- Panel de Configuración -->
      <div class="lg:col-span-1 space-y-6">
        <!-- Tipo de Documento -->
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
          <h2 class="text-lg font-bold text-gray-900 dark:text-white mb-4">Tipo de Documento</h2>
          <div class="flex gap-2">
            <button
              (click)="selectedDocumentType.set('Boleta')"
              [class.bg-blue-600]="selectedDocumentType() === 'Boleta'"
              [class.text-white]="selectedDocumentType() === 'Boleta'"
              [class.bg-gray-200]="selectedDocumentType() !== 'Boleta'"
              [class.dark:bg-gray-700]="selectedDocumentType() !== 'Boleta'"
              class="flex-1 px-4 py-2 rounded-lg font-medium transition-colors">
              Boleta
            </button>
            <button
              (click)="selectedDocumentType.set('Factura')"
              [class.bg-blue-600]="selectedDocumentType() === 'Factura'"
              [class.text-white]="selectedDocumentType() === 'Factura'"
              [class.bg-gray-200]="selectedDocumentType() !== 'Factura'"
              [class.dark:bg-gray-700]="selectedDocumentType() !== 'Factura'"
              class="flex-1 px-4 py-2 rounded-lg font-medium transition-colors">
              Factura
            </button>
          </div>
        </div>

        <!-- Configuración de Visualización -->
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
          <h2 class="text-lg font-bold text-gray-900 dark:text-white mb-4">Configuración de Visualización</h2>
          <div class="space-y-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Modo de Visualización Predeterminado</label>
              <select
                [value]="defaultViewMode()"
                (change)="defaultViewMode.set($any($event.target).value)"
                class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white">
                <option value="preview">Vista Previa (Mostrar antes de generar)</option>
                <option value="direct">Vista Directa (Generar PDF inmediatamente)</option>
              </select>
              <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">
                Si selecciona "Vista Directa", el sistema omitirá la vista previa y generará el PDF directamente.
              </p>
            </div>
            <div>
              <label class="flex items-center gap-2 cursor-pointer">
                <input
                  type="checkbox"
                  [checked]="directPrint()"
                  (change)="directPrint.set($any($event.target).checked)"
                  class="w-4 h-4 text-blue-600 rounded">
                <span class="text-sm font-medium text-gray-700 dark:text-gray-300">Impresión Directa</span>
              </label>
              <p class="text-xs text-gray-500 dark:text-gray-400 mt-1 ml-6">
                Si está activado, el sistema omitirá la vista previa y abrirá el diálogo de impresión directamente.
              </p>
            </div>
            <div>
              <label class="flex items-center gap-2 cursor-pointer">
                <input
                  type="checkbox"
                  [checked]="boletaTemplateActive()"
                  (change)="boletaTemplateActive.set($any($event.target).checked)"
                  class="w-4 h-4 text-blue-600 rounded">
                <span class="text-sm font-medium text-gray-700 dark:text-gray-300">Plantilla de Boleta Activa</span>
              </label>
            </div>
            <div>
              <label class="flex items-center gap-2 cursor-pointer">
                <input
                  type="checkbox"
                  [checked]="facturaTemplateActive()"
                  (change)="facturaTemplateActive.set($any($event.target).checked)"
                  class="w-4 h-4 text-blue-600 rounded">
                <span class="text-sm font-medium text-gray-700 dark:text-gray-300">Plantilla de Factura Activa</span>
              </label>
            </div>
          </div>
        </div>

        <!-- Información de la Empresa -->
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
          <h2 class="text-lg font-bold text-gray-900 dark:text-white mb-4">Información de la Empresa</h2>
          <div class="space-y-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
                <input type="checkbox" [checked]="showLogo()" (change)="showLogo.set($any($event.target).checked)" class="mr-2">
                Mostrar Logo
              </label>
              @if (showLogo()) {
                <input
                  type="text"
                  [value]="logoUrl()"
                  (input)="logoUrl.set($any($event.target).value)"
                  placeholder="URL del logo"
                  class="mt-2 w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white">
              }
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Nombre de la Empresa</label>
              <input
                type="text"
                [value]="companyName()"
                (input)="companyName.set($any($event.target).value)"
                class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white">
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Dirección</label>
              <input
                type="text"
                [value]="companyAddress()"
                (input)="companyAddress.set($any($event.target).value)"
                class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white">
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Teléfono</label>
              <input
                type="text"
                [value]="companyPhone()"
                (input)="companyPhone.set($any($event.target).value)"
                class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white">
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Email</label>
              <input
                type="email"
                [value]="companyEmail()"
                (input)="companyEmail.set($any($event.target).value)"
                class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white">
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">RUC</label>
              <input
                type="text"
                [value]="companyRuc()"
                (input)="companyRuc.set($any($event.target).value)"
                class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white">
            </div>
          </div>
        </div>

        <!-- Personalización Visual -->
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
          <h2 class="text-lg font-bold text-gray-900 dark:text-white mb-4">Personalización Visual</h2>
          <div class="space-y-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Color Principal</label>
              <input
                type="color"
                [value]="primaryColor()"
                (input)="primaryColor.set($any($event.target).value)"
                class="w-full h-10 rounded-lg border border-gray-300 dark:border-gray-600">
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Color Secundario</label>
              <input
                type="color"
                [value]="secondaryColor()"
                (input)="secondaryColor.set($any($event.target).value)"
                class="w-full h-10 rounded-lg border border-gray-300 dark:border-gray-600">
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Color de Texto</label>
              <input
                type="color"
                [value]="textColor()"
                (input)="textColor.set($any($event.target).value)"
                class="w-full h-10 rounded-lg border border-gray-300 dark:border-gray-600">
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Fuente</label>
              <select
                [value]="fontFamily()"
                (change)="fontFamily.set($any($event.target).value)"
                class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white">
                <option value="Arial">Arial</option>
                <option value="Times New Roman">Times New Roman</option>
                <option value="Courier New">Courier New</option>
                <option value="Helvetica">Helvetica</option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Tamaño de Fuente: {{ fontSize() }}px</label>
              <input
                type="range"
                [value]="fontSize()"
                (input)="fontSize.set(+$any($event.target).value)"
                min="8"
                max="16"
                class="w-full">
            </div>
          </div>
        </div>

        <!-- Acciones -->
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
          <div class="flex flex-col gap-2">
            <button
              (click)="saveSettings()"
              class="w-full px-4 py-2 rounded-lg bg-blue-600 text-white font-medium hover:bg-blue-700">
              Guardar Configuración
            </button>
            <button
              (click)="previewDocument()"
              class="w-full px-4 py-2 rounded-lg bg-green-600 text-white font-medium hover:bg-green-700">
              Vista Previa
            </button>
            <button
              (click)="resetToDefault()"
              class="w-full px-4 py-2 rounded-lg bg-gray-600 text-white font-medium hover:bg-gray-700">
              Restaurar por Defecto
            </button>
          </div>
        </div>
      </div>

      <!-- Vista Previa -->
      <div class="lg:col-span-2">
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6">
          <h2 class="text-lg font-bold text-gray-900 dark:text-white mb-4">Vista Previa</h2>
          <div class="border-2 border-gray-300 dark:border-gray-600 rounded-lg p-8 bg-white" [style.color]="textColor()" [style.font-family]="fontFamily()" [style.font-size.px]="fontSize()">
            <!-- Header -->
            <div class="mb-6 pb-4 border-b-2" [style.border-color]="primaryColor()">
              <div class="flex items-center justify-between mb-4">
                @if (showLogo() && logoUrl()) {
                  <img [src]="logoUrl()" alt="Logo" class="h-16 object-contain">
                } @else {
                  <div class="h-16 w-16 rounded-lg flex items-center justify-center" [style.background-color]="primaryColor()">
                    <span class="text-white text-2xl font-bold">{{ companyName().charAt(0) }}</span>
                  </div>
                }
                <div class="text-right">
                  <h3 class="font-bold text-xl" [style.color]="primaryColor()">{{ selectedDocumentType() }}</h3>
                  <p class="text-sm">N° 001-00000001</p>
                </div>
              </div>
              <div>
                <h2 class="font-bold text-xl mb-2" [style.color]="primaryColor()">{{ companyName() }}</h2>
                @if (companyAddress()) {
                  <p class="text-sm">{{ companyAddress() }}</p>
                }
                @if (companyPhone()) {
                  <p class="text-sm">Tel: {{ companyPhone() }}</p>
                }
                @if (companyEmail()) {
                  <p class="text-sm">Email: {{ companyEmail() }}</p>
                }
                @if (companyRuc()) {
                  <p class="text-sm">RUC: {{ companyRuc() }}</p>
                }
              </div>
            </div>

            <!-- Cliente -->
            <div class="mb-6">
              <h4 class="font-bold mb-2" [style.color]="secondaryColor()">Cliente:</h4>
              <p>Nombre: Cliente de Ejemplo</p>
              <p>DNI: 12345678</p>
              <p>Dirección: Av. Ejemplo 123</p>
            </div>

            <!-- Productos -->
            <div class="mb-6">
              <table class="w-full border-collapse">
                <thead>
                  <tr [style.background-color]="primaryColor()" [style.color]="'white'">
                    <th class="p-2 text-left">Cantidad</th>
                    <th class="p-2 text-left">Descripción</th>
                    <th class="p-2 text-right">Precio Unit.</th>
                    <th class="p-2 text-right">Total</th>
                  </tr>
                </thead>
                <tbody>
                  <tr class="border-b">
                    <td class="p-2">2</td>
                    <td class="p-2">Producto de Ejemplo</td>
                    <td class="p-2 text-right">S/ 10.00</td>
                    <td class="p-2 text-right">S/ 20.00</td>
                  </tr>
                  <tr class="border-b">
                    <td class="p-2">1</td>
                    <td class="p-2">Otro Producto</td>
                    <td class="p-2 text-right">S/ 15.00</td>
                    <td class="p-2 text-right">S/ 15.00</td>
                  </tr>
                </tbody>
              </table>
            </div>

            <!-- Totales -->
            <div class="mb-6 text-right">
              <p class="mb-1">Subtotal: S/ 35.00</p>
              <p class="mb-1">IGV (18%): S/ 6.30</p>
              <p class="font-bold text-lg" [style.color]="primaryColor()">Total: S/ 41.30</p>
            </div>

            <!-- Footer -->
            <div class="mt-6 pt-4 border-t-2" [style.border-color]="primaryColor()">
              <p class="text-xs text-center text-gray-600">
                Gracias por su compra
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

