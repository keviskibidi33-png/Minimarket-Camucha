<div class="space-y-4">
  <!-- Tipo de Logo -->
  <div class="flex gap-4 mb-4">
    <button
      type="button"
      (click)="onTypeChange('upload')"
      [class.bg-primary-admin]="selectedType() === 'upload'"
      [class.text-white]="selectedType() === 'upload'"
      [class.bg-gray-200]="selectedType() !== 'upload'"
      [class.text-gray-700]="selectedType() !== 'upload'"
      class="flex-1 px-4 py-2 rounded-lg font-medium transition-colors">
      Subir Imagen
    </button>
    <button
      type="button"
      (click)="onTypeChange('emoji')"
      [class.bg-primary-admin]="selectedType() === 'emoji'"
      [class.text-white]="selectedType() === 'emoji'"
      [class.bg-gray-200]="selectedType() !== 'emoji'"
      [class.text-gray-700]="selectedType() !== 'emoji'"
      class="flex-1 px-4 py-2 rounded-lg font-medium transition-colors">
      Elegir Emoji
    </button>
  </div>

  <!-- Preview -->
  @if (selectedType() === 'upload' && previewUrl()) {
    <div class="relative inline-block">
      <img 
        [src]="previewUrl()" 
        alt="Logo preview"
        class="w-32 h-32 object-contain rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 p-2">
      <button
        type="button"
        (click)="removeLogo()"
        class="absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600">
        <span class="material-symbols-outlined text-sm">close</span>
      </button>
    </div>
  }

  @if (selectedType() === 'emoji' && selectedEmoji()) {
    <div class="relative inline-block">
      <div class="w-32 h-32 flex items-center justify-center text-6xl rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800">
        {{ selectedEmoji() }}
      </div>
      <button
        type="button"
        (click)="removeLogo()"
        class="absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600">
        <span class="material-symbols-outlined text-sm">close</span>
      </button>
    </div>
  }

  <!-- Upload Area -->
  @if (selectedType() === 'upload') {
    <div>
      <label 
        for="logo-file-input"
        class="flex flex-col items-center justify-center w-full h-32 border-2 border-gray-300 dark:border-gray-700 border-dashed rounded-lg cursor-pointer bg-gray-50 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
        <div class="flex flex-col items-center justify-center pt-5 pb-6">
          <span class="material-symbols-outlined text-gray-400 dark:text-gray-500 text-4xl mb-2">cloud_upload</span>
          <p class="mb-2 text-sm text-gray-500 dark:text-gray-400">
            <span class="font-semibold">Click para subir</span> o arrastra y suelta
          </p>
          <p class="text-xs text-gray-500 dark:text-gray-400">JPG, PNG, WEBP o SVG (MAX. 5MB)</p>
        </div>
        <input 
          id="logo-file-input"
          type="file" 
          class="hidden" 
          accept="image/jpeg,image/jpg,image/png,image/webp,image/svg+xml"
          (change)="onFileSelected($event)">
      </label>
    </div>

    <!-- Progress Bar -->
    @if (isUploading()) {
      <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2">
        <div 
          class="bg-primary-admin h-2 rounded-full transition-all duration-300"
          [style.width.%]="uploadProgress()">
        </div>
      </div>
      <p class="text-sm text-gray-500 text-center">{{ uploadProgress() }}%</p>
    }
  }

  <!-- Emoji Picker -->
  @if (selectedType() === 'emoji') {
    <div>
      <button
        type="button"
        (click)="toggleEmojiPicker()"
        class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700">
        {{ selectedEmoji() ? 'Cambiar Emoji' : 'Seleccionar Emoji' }}
      </button>

      @if (showEmojiPicker()) {
        <div class="mt-4 p-4 border border-gray-300 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 max-h-64 overflow-y-auto">
          <div class="grid grid-cols-10 gap-2">
            @for (emoji of emojis; track emoji) {
              <button
                type="button"
                (click)="selectEmoji(emoji)"
                [class.bg-primary-admin]="selectedEmoji() === emoji"
                [class.text-white]="selectedEmoji() === emoji"
                class="text-2xl p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
                {{ emoji }}
              </button>
            }
          </div>
        </div>
      }
    </div>
  }
</div>

