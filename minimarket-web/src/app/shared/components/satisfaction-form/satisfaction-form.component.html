<div class="fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4 animate-fade-in" (click)="cancel()">
  <div class="bg-white dark:bg-gray-900 rounded-xl shadow-2xl max-w-md w-full p-8 animate-scale-in" (click)="$event.stopPropagation()">
    <!-- Header -->
    <div class="text-center mb-6">
      <div class="inline-flex items-center justify-center w-20 h-20 bg-primary-100 dark:bg-primary-900/20 rounded-full mb-4">
        <span class="material-symbols-outlined text-5xl text-primary-600 dark:text-primary-400">sentiment_satisfied</span>
      </div>
      <h3 class="text-2xl font-bold text-text-light dark:text-text-dark mb-2">¡Gracias por tu compra!</h3>
      <p class="text-gray-600 dark:text-gray-400 text-sm">
        Pedido: <span class="font-semibold">{{ orderNumber }}</span>
      </p>
    </div>

    <!-- Rating -->
    <div class="mb-6">
      <label class="block text-sm font-medium text-text-light dark:text-text-dark mb-3 text-center">
        ¿Cómo calificarías tu experiencia?
      </label>
      <div class="flex justify-center gap-2">
        @for (star of [1, 2, 3, 4, 5]; track star) {
          <button
            type="button"
            (click)="setRating(star)"
            class="transition-transform hover:scale-110 focus:outline-none"
            [class.text-yellow-400]="star <= rating()"
            [class.text-gray-300]="star > rating()"
            [attr.aria-label]="'Calificar con ' + star + ' estrella' + (star > 1 ? 's' : '')">
            <span class="material-symbols-outlined text-5xl">
              {{ star <= rating() ? 'star' : 'star_border' }}
            </span>
          </button>
        }
      </div>
      <p class="text-center text-sm text-gray-500 dark:text-gray-400 mt-2">
        {{ rating() }} de 5 estrellas
      </p>
    </div>

    <!-- Comment -->
    <div class="mb-6">
      <label for="comment" class="block text-sm font-medium text-text-light dark:text-text-dark mb-2">
        Comentarios (opcional)
      </label>
      <textarea
        id="comment"
        [(ngModel)]="comment"
        rows="4"
        placeholder="Comparte tu opinión sobre tu experiencia..."
        class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-text-light dark:text-text-dark focus:ring-2 focus:ring-primary focus:border-primary resize-none">
      </textarea>
    </div>

    <!-- Would Recommend -->
    <div class="mb-6">
      <label class="flex items-center gap-3 cursor-pointer">
        <input
          type="checkbox"
          [(ngModel)]="wouldRecommend"
          class="w-5 h-5 text-primary border-gray-300 rounded focus:ring-primary">
        <span class="text-sm text-text-light dark:text-text-dark">
          Sí, recomendaría este servicio a otros
        </span>
      </label>
    </div>

    <!-- Actions -->
    <div class="flex gap-3">
      <button
        type="button"
        (click)="cancel()"
        class="flex-1 px-4 py-3 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 font-medium transition-colors">
        Omitir
      </button>
      <button
        type="button"
        (click)="submit()"
        class="flex-1 px-4 py-3 bg-primary text-white rounded-lg hover:bg-primary/90 font-bold transition-colors">
        Enviar
      </button>
    </div>
  </div>
</div>

