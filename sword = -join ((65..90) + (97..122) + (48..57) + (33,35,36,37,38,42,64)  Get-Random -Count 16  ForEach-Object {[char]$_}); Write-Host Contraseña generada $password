[1mdiff --git a/src/Minimarket.API/Program.cs b/src/Minimarket.API/Program.cs[m
[1mindex 082bbc5..7c298db 100644[m
[1m--- a/src/Minimarket.API/Program.cs[m
[1m+++ b/src/Minimarket.API/Program.cs[m
[36m@@ -203,28 +203,55 @@[m [mbuilder.Services.AddAuthentication(options =>[m
 var allowedOrigins = builder.Configuration.GetSection("Cors:AllowedOrigins").Get<string[]>() [m
     ?? new[] { "http://localhost:4200" };[m
 [m
[31m-// Agregar or√≠genes de producci√≥n si no est√°n en la configuraci√≥n[m
[31m-var productionOrigins = new[][m
[31m-{[m
[31m-    "https://minimarket.edvio.app",[m
[31m-    "https://api-minimarket.edvio.app"[m
[31m-};[m
[31m-[m
[31m-var allOrigins = allowedOrigins[m
[31m-    .Concat(productionOrigins)[m
[31m-    .Distinct()[m
[31m-    .ToArray();[m
[32m+[m[32m// En producci√≥n, usar solo los or√≠genes configurados en variables de entorno[m
[32m+[m[32m// En desarrollo, permitir localhost por defecto[m
[32m+[m[32mvar allOrigins = allowedOrigins;[m
 [m
 builder.Services.AddCors(options =>[m
 {[m
     options.AddPolicy("FrontendPolicy", policy =>[m
     {[m
[31m-        policy.WithOrigins(allOrigins)[m
[31m-             .AllowAnyHeader()[m
[31m-             .AllowAnyMethod()[m
[31m-             .AllowCredentials()[m
[31m-             .SetPreflightMaxAge(TimeSpan.FromHours(24)); // Cache preflight requests[m
[32m+[m[32m        // Permitir or√≠genes espec√≠ficos y cualquier dominio de ngrok[m
[32m+[m[32m        policy.SetIsOriginAllowed(origin =>[m[41m [m
[32m+[m[32m        {[m
[32m+[m[32m            // Permitir localhost para desarrollo (cualquier puerto)[m
[32m+[m[32m            if (origin.StartsWith("http://localhost") ||[m[41m [m
[32m+[m[32m                origin.StartsWith("https://localhost") ||[m
[32m+[m[32m                origin.StartsWith("http://127.0.0.1") ||[m
[32m+[m[32m                origin.StartsWith("https://127.0.0.1"))[m
[32m+[m[32m                return true;[m
[32m+[m[41m            [m
[32m+[m[32m            // Permitir or√≠genes de producci√≥n configurados[m
[32m+[m[32m            if (allOrigins.Contains(origin))[m
[32m+[m[32m                return true;[m
[32m+[m[41m            [m
[32m+[m[32m            // Permitir cualquier dominio de ngrok (para desarrollo con ngrok)[m
[32m+[m[32m            if (origin.Contains(".ngrok-free.dev") ||[m[41m [m
[32m+[m[32m                origin.Contains(".ngrok.io") ||[m[41m [m
[32m+[m[32m                origin.Contains(".ngrok.app") ||[m
[32m+[m[32m                origin.Contains("ngrok-free.app") ||[m
[32m+[m[32m                origin.Contains("ngrok.dev"))[m
[32m+[m[32m                return true;[m
[32m+[m[41m            [m
[32m+[m[32m            return false;[m
[32m+[m[32m        })[m
[32m+[m[32m        .AllowAnyHeader()[m
[32m+[m[32m        .AllowAnyMethod()[m
[32m+[m[32m        .AllowCredentials()[m
[32m+[m[32m        .SetPreflightMaxAge(TimeSpan.FromHours(24)); // Cache preflight requests[m
     });[m
[32m+[m[41m    [m
[32m+[m[32m    // Pol√≠tica adicional para permitir cualquier origen (solo para desarrollo/ngrok)[m
[32m+[m[32m    // Esto es m√°s permisivo y √∫til cuando se usa ngrok con URLs din√°micas[m
[32m+[m[32m    if (builder.Environment.IsDevelopment())[m
[32m+[m[32m    {[m
[32m+[m[32m        options.AddPolicy("AllowAll", policy =>[m
[32m+[m[32m        {[m
[32m+[m[32m            policy.AllowAnyOrigin()[m
[32m+[m[32m                  .AllowAnyHeader()[m
[32m+[m[32m                  .AllowAnyMethod();[m
[32m+[m[32m        });[m
[32m+[m[32m    }[m
 });[m
 [m
 // Authorization con permisos granulares[m
[36m@@ -286,7 +313,15 @@[m [mapp.UseStaticFiles(new StaticFileOptions[m
     }[m
 });[m
 [m
[31m-app.UseCors("FrontendPolicy");[m
[32m+[m[32m// CORS - Usar pol√≠tica permisiva en desarrollo, espec√≠fica en producci√≥n[m
[32m+[m[32mif (app.Environment.IsDevelopment())[m
[32m+[m[32m{[m
[32m+[m[32m    app.UseCors("AllowAll"); // M√°s permisivo para desarrollo/ngrok[m
[32m+[m[32m}[m
[32m+[m[32melse[m
[32m+[m[32m{[m
[32m+[m[32m    app.UseCors("FrontendPolicy"); // Pol√≠tica espec√≠fica para producci√≥n[m
[32m+[m[32m}[m
 [m
 app.UseAuthentication();[m
 app.UseAuthorization();[m
[36m@@ -335,6 +370,26 @@[m [mapp.MapHealthChecks("/health/ready", new Microsoft.AspNetCore.Diagnostics.Health[m
 [m
 app.MapControllers();[m
 [m
[32m+[m[32m// Servir frontend Angular compilado (solo si existe)[m
[32m+[m[32m// Esto permite que backend y frontend funcionen en el mismo puerto[m
[32m+[m[32mvar frontendPath = Path.Combine(builder.Environment.ContentRootPath, "..", "..", "minimarket-web", "dist", "minimarket-web", "browser");[m
[32m+[m[32mif (Directory.Exists(frontendPath))[m
[32m+[m[32m{[m
[32m+[m[32m    app.UseStaticFiles(new StaticFileOptions[m
[32m+[m[32m    {[m
[32m+[m[32m        FileProvider = new Microsoft.Extensions.FileProviders.PhysicalFileProvider(frontendPath),[m
[32m+[m[32m        RequestPath = ""[m
[32m+[m[32m    });[m
[32m+[m[41m    [m
[32m+[m[32m    // Fallback para SPA routing - todas las rutas que no sean API devuelven index.html[m
[32m+[m[32m    // IMPORTANTE: Esto debe ir DESPU√âS de MapControllers para que las rutas /api/* tengan prioridad[m
[32m+[m[32m    // Tambi√©n debe ir ANTES de app.Run() pero DESPU√âS de todas las rutas de API[m
[32m+[m[32m    app.MapFallbackToFile("index.html", new StaticFileOptions[m
[32m+[m[32m    {[m
[32m+[m[32m        FileProvider = new Microsoft.Extensions.FileProviders.PhysicalFileProvider(frontendPath)[m
[32m+[m[32m    });[m
[32m+[m[32m}[m
[32m+[m
 // Seed database on startup[m
 await app.SeedDatabaseAsync();[m
 [m
